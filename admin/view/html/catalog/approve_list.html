<?php echo $header; ?>
<?php echo $nav; ?>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1><?php echo $heading_title; ?></h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <?php for($i = 0; $i < count($breadcrumbs); $i++) : ?>
                        <?php if($i != (count($breadcrumbs) - 1)) : ?>
                        <?php if($i == 0) : ?>
                        <li class="breadcrumb-item">
                            <i class="nav-icon fa fa-home"></i>
                            <a href="<?php echo $breadcrumbs[$i]['href']; ?>">
                                <?php echo $breadcrumbs[$i]['text']; ?>
                            </a>
                        </li>
                        <?php else : ?>
                        <li class="breadcrumb-item">
                            <a href="<?php echo $breadcrumbs[$i]['href']; ?>">
                                <?php echo $breadcrumbs[$i]['text']; ?>
                            </a>
                        </li>
                        <?php endif; ?>
                        <?php else : ?>
                        <li class="breadcrumb-item active"><?php echo $breadcrumbs[$i]['text']; ?></li>
                        <?php endif; ?>
                        <?php endfor; ?>
                    </ol>
                </div>
            </div>
        </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-12">
                <!-- Horizontal Form -->
                <div class="card card-info card-outline">
 
                    <form action="<?php echo $action; ?>" method="POST" enctype="multipart/form-data" id="form-team"
                          class="form-horizontal">
                        <div class="card-body">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#member" role="tab">
                                        <?php echo $tab_member; ?>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#project" role="tab">
                                        <?php echo $tab_project; ?>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#trf" role="tab">
                                        <?php echo $tab_trf; ?>
                                    </a>
                                </li>
                                <!--                                <li class="nav-item">
                                                                    <a class="nav-link" data-toggle="tab" href="#option" role="tab">
                                                                        <?php echo $tab_option; ?>
                                                                    </a>
                                                                </li>-->
                            </ul>

                            <!-- Tab panes {Fade}  -->
                            <div class="tab-content">
                                <div class="tab-pane fade in active show" id="member" name="member" role="tabpanel">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">
                                                <i class="fa fa-list-ul"></i>
                                                <?php echo $text_member; ?>
                                            </h3>
                                        </div>
                                        <!-- /.card-header -->
                                        <div class="card-body">
                                            <form action="" method="POST" enctype="multipart/form-data"
                                                  id="form-team-group">
                                                <div class="table-responsive">
                                                    <table id="table_team" class="table table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                               <th>Month</th>
                                                                <th>Members Inducted </th>
                                                                <th>Members Unlisted </th>
                                                                <th>Net Growth </th>
                                                                <th>Points</th>

                                                                <th class="no-sort">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php if($members) : ?>
                                                            <?php foreach($members as $member) : ?>
                                                            <tr>
                                                                <td class="text-left">
                                                                    <?php echo $member['date']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $member['induction']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $member['unlist']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $member['net']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $member['points']; ?>
                                                                </td>
                                                                <td class="text-left"><a href="<?php echo $member['edit']; ?>"
                                                                                         data-toggle="tooltip" title="<?php echo $button_edit; ?>"
                                                                                         class="btn btn-primary"><i class="fa fa-pencil-alt"></i></a>
                                                                </td>
                                                            </tr>
                                                            <?php endforeach; ?>
                                                            <?php else : ?>
                                                            <tr>
                                                                <td class="text-center" colspan="5">
                                                                    <?php echo $text_no_results; ?>
                                                                </td>
                                                            </tr>
                                                            <?php endif; ?>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </form>
                                        </div>
                                        <!-- /.card-body -->
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="project" role="tabpanel">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">
                                                <i class="fa fa-list-ul"></i>
                                                <?php echo $text_project; ?>
                                            </h3>
                                        </div>
                                        <!-- /.card-header -->
                                        <div class="card-body">
                                            <form action="" method="POST" enctype="multipart/form-data"
                                                  id="form-team-group">
                                                <div class="table-responsive">
                                                    <table id="table_team" class="table table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th>Month</th>
                                                                <th>Project Title</th>
                                                                <th>Projects Cost(Doller)</th>
                                                                <th>Number of beneficiaries</th>
                                                                <th class="no-sort">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php if($projects) : ?>
                                                            <?php foreach($projects as $project) : ?>
                                                            <tr>
                                                                <td class="text-left">
                                                                    <?php echo $project['date']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $project['title']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $project['amount']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $project['no_of_beneficiary']; ?>
                                                                </td>
                                                                <td class="text-left"><a href="<?php echo $project['edit']; ?>"
                                                                                         data-toggle="tooltip" title="<?php echo $button_edit; ?>"
                                                                                         class="btn btn-primary"><i class="fa fa-pencil-alt"></i></a>
                                                                </td>
                                                            </tr>
                                                            <?php endforeach; ?>
                                                            <?php else : ?>
                                                            <tr>
                                                                <td class="text-center" colspan="5">
                                                                    <?php echo $text_no_results; ?>
                                                                </td>
                                                            </tr>
                                                            <?php endif; ?>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </form>
                                        </div>
                                        <!-- /.card-body -->
                                    </div>
                                </div>

                                <div class="tab-pane fade" id="trf" name="local" role="tabpanel">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">
                                                <i class="fa fa-list-ul"></i>
                                                <?php echo $text_trf; ?>
                                            </h3>
                                        </div>
                                        <!-- /.card-header -->
                                        <div class="card-body">
                                            <form action="" method="POST" enctype="multipart/form-data"
                                                  id="form-team-group">
                                                <div class="table-responsive">
                                                    <table id="table_team" class="table table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th>Month</th>
                                                                <th>TRF Contribution</th>
                                                                <th>Points</th>
                                                                <th class="no-sort">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php if($trfs) : ?>
                                                            <?php foreach($trfs as $trf) : ?>
                                                            <tr>
                                                                <td class="text-left">
                                                                    <?php echo $trf['date']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $trf['amount_usd']; ?>
                                                                </td>
                                                                <td class="text-left">
                                                                    <?php echo $trf['points']; ?>
                                                                </td>
                                                                <td class="text-left"><a href="<?php echo $trf['edit']; ?>"
                                                                                         data-toggle="tooltip" title="<?php echo $button_edit; ?>"
                                                                                         class="btn btn-primary"><i class="fa fa-pencil-alt"></i></a>
                                                                </td>
                                                            </tr>
                                                            <?php endforeach; ?>
                                                            <?php else : ?>
                                                            <tr>
                                                                <td class="text-center" colspan="5">
                                                                    <?php echo $text_no_results; ?>
                                                                </td>
                                                            </tr>
                                                            <?php endif; ?>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </form>
                                        </div>
                                        <!-- /.card-body -->
                                    </div>
                                </div>
                                <!--
                                                                <div class="tab-pane fade" id="option" role="tabpanel">
                                                                  
                                                                </div>-->

                            </div>
                        </div>
                        <!-- /.box-body -->
                    </form>
                </div>
                <!-- /.box -->
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<?php echo $footer; ?>
<script type="text/javascript">
    $(function () {
        var table = $('#table_team').DataTable({
            "order": [
                [1, 'asc']
            ],
            "language": {
                "paginate": {
                    'previous': '«',
                    'next': '»'
                }
            },
            "columnDefs": [{
                    "targets": "no-sort",
                    "orderable": false,
                }],
        });

        $.fn.dataTable.Buttons.defaults.dom.container.className =
                'dt-buttons btn-overlap btn-group btn-overlap';

        new $.fn.dataTable.Buttons(table, {
            buttons: [{
                    "extend": "colvis",
                    "text": "<i class='fa fa-search'></i> <span hidden><?php echo $text_dt_column; ?></span>",
                    "className": "dt-button btn-primary",
                    "init": function (api, node, config) {
                        $(node).removeClass('btn-default');
                    },
                    columns: ':not(:first):not(:last)'
                },
                {
                    "extend": "copy",
                    "text": "<i class='fa fa-copy'></i> <span hidden><?php echo $text_dt_copy; ?></span>",
                    "className": "dt-button btn-info",
                    "init": function (api, node, config) {
                        $(node).removeClass('btn-default');
                    },
                },
                {
                    "extend": "collection",
                    "text": "<i class='fa fa-download'></i> <span hidden><?php echo $text_dt_file_export; ?></span>",
                    "className": "dt-button btn-success",
                    "init": function (api, node, config) {
                        $(node).removeClass('btn-default');
                    },
                    "buttons": [{
                            "extend": "csv",
                            "text": "<i class='fa fa-database'></i> <span><?php echo $text_dt_export_csv; ?></span>"
                        },
                        {
                            "extend": "excel",
                            "text": "<i class='fa fa-file-excel-o'></i> <span><?php echo $text_dt_export_excel; ?></span>"
                        },
                        {
                            "extend": "pdf",
                            "text": "<i class='fa fa-file-pdf-o'></i> <span><?php echo $text_dt_export_pdf; ?></span>"
                        }
                    ]
                },
                {
                    "extend": "print",
                    "text": "<i class='fa fa-print'></i> <span hidden><?php echo $text_dt_print; ?></span>",
                    "className": 'dt-button',
                    autoPrint: false,
                    exportOptions: {
                        columns: ':not(:last)',
                    }
                },
            ]
        });
        table.buttons().container().appendTo($('.tableTools-container'));

        // Style the message box
        var defaultCopyAction = table.button(1).action();
        /*table.button(1).action(function (e, dt, button, config) {
         defaultCopyAction(e, dt, button, config);
         $('.dt-button-info').addClass('bg.olive text-center text-white');
         });*/

        var defaultColvisAction = table.button(0).action();
        /*table.button(0).action(function (e, dt, button, config) {
         defaultColvisAction(e, dt, button, config);
         
         if ($('.dt-button-collection > .dropdown-menu').length == 0) {
         $('.dt-button-collection')
         .wrapInner(
         '<ul class="dropdown-menu dropdown-light dropdown-caret dropdown-caret" />').find(
         ' a').attr('href', '#').wrap("<li />")
         }
         $('.dt-button-collection').appendTo('.tableTools-container .dt-buttons')
         });*/

        setTimeout(function () {
            $($('.tableTools-container')).find('.dt-button').each(function () {
                var div = $(this).find(' > div').first();
                if (div.length == 1)
                    div.tooltip({
                        container: 'body',
                        title: div.parent().text()
                    });
                else
                    $(this).tooltip({
                        container: 'body',
                        title: $(this).text()
                    });
            });
        }, 500);

        $(document).on('click', '#table_team .dropdown-toggle', function (e) {
            e.stopImmediatePropagation();
            e.stopPropagation();
            e.preventDefault();
        });
    });
</script>