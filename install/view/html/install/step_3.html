<?php echo $header; ?>
<?php echo $nav; ?>
<div class="container">
    <header>
        <div class="row">
            <div class="col-12">
                <h1 class="float-left">3<small>/4</small></h1>
                <h3>
                    <?php echo $heading_title; ?><br /><small>
                        <?php echo $text_step_3; ?></small>
                </h3>
            </div>
        </div>
    </header>

    <?php if($warning_err) : ?>
    <div class="alert alert-danger alert-dismissible">
        <i class="fas fa-exclamation-circle"></i>
        <?php echo $warning_err; ?>
        <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    <?php endif; ?>

    <div class="row">
        <div class="col-sm-12">
            <form action="<?php echo $action; ?>" method="POST" enctype="multipart/form-data" class="form-horizontal">
                <p>
                    <?php echo $text_authenticate; ?>
                </p>
                <fieldset>
                    <div class="form-group form-row required">
                        <label for="input-auth-code" class="col-sm-2 col-form-label">
                            <?php echo $entry_auth_code; ?></label>

                        <div class="col-sm-10">
                            <input type="text" name="auth_code" placeholder="<?php echo $entry_auth_code; ?>" value="<?php echo $auth_code; ?>"
                                id="input-auth-code" class="form-control">
                            <?php if($auth_code_err) : ?>
                            <div class="text-danger">
                                <?php echo $auth_code_err; ?>
                            </div>
                            <?php endif; ?>
                        </div>
                    </div>
                    <div class="form-group form-row required">
                        <label for="input-auth-email" class="col-sm-2 col-form-label">
                            <?php echo $entry_auth_email; ?></label>

                        <div class="col-sm-10">
                            <input type="text" name="auth_email" placeholder="<?php echo $entry_auth_email; ?>" value="<?php echo $auth_email; ?>"
                                id="input-auth-email" class="form-control">
                            <?php if($auth_email_err) : ?>
                            <div class="text-danger">
                                <?php echo $auth_email_err; ?>
                            </div>
                            <?php endif; ?>
                        </div>
                    </div>
                </fieldset>
                <div class="buttons">
                    <div class="float-left">
                        <a href="<?php echo $back; ?>" class="btn btn-default btn-sm">
                            <?php echo $button_back; ?></a>
                    </div>
                    <div class="float-right">
                        <input type="submit" value="<?php echo $button_continue; ?>" class="btn btn-primary btn-sm" />
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<?php echo $footer; ?>
<script type="text/javascript">
    function hyphen(input, format, separator) {
        var output = '';
        var idx = 0;

        for (var i = 0; i < format.length && idx < input.length; i++) {
            output += input.substr(idx, format[i]);
            if (idx + format[i] < input.length) output += separator;
            idx += format[i];
        }

        output += input.substr(idx);

        return output;
    }

    $('input[name=\'auth_code\']').on('keyup', function () {
        var $this = $(this).val().replace(/-/g, '');

        if ($this.length > 0) {
            $this = hyphen($this, [4, 4, 4, 4], '-');
        }

        $(this).val($this);
    });
</script>